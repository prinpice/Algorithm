# String

## String

### 1. 문자 표현

* 글자 A를 메모리에 저장하는 방법

  * **메모리는 숫자만 저장**

  1. 글자의 모양 그대로 비트맵으로 저장 또는 각 문자에 대응되는 숫자를 지정후(indexing) 메모리에 저장
  2. 코드체계
     * 영어가 대소문자 합쳐서 52 => 6(64가지)비트로 표현할 수 있음

* 아스키(ASCII)
  * 문자 인코딩 표준
  * 7bit 인코딩으로 128문자를 표현, 33개의 출력 불가능한 제어 문자들 + 공백을 비롯한 95개의 출력 가능한 문자들
  * 확장 아스키
    * 표준 문자 이외의 부가적인 문자 128개 추가(악센트 문자, 도형 문자, 특수 문자, 특수 기호)
    * 1Byte 내의 8bit를 모두 사용하여 추가적인 문자 표현
    * 컴퓨터 생산자, 소프트웨어 개발자에게 할당, 서로 다른 프로그램이나 컴퓨터 사이에 교환되지 못함
    * 프로그램이나 컴퓨터/프린터가 해독할 수 있도록 설계되어 있어야 올바로 해독 가능
* 유니코드
  * 다국어 처리를 위한 표준
  * Character Set
    * 유니코드를 저장하는 변수의 크기를 정의
    * UCS-2(Universal Character Set 2)
    * UCS-4(Universal Character Set 4)
    * 문제점 : 파일 인식시 UCS-2/UCS-4 구분에서 인식 후 다르게(각 경우에 맞게) 구현해야함 => 외부 인코딩 필요(big-endian, little-endian)
  * 유니코드 인코딩
    * UTF : Unicode Transformation Format
    * UTF-8(in web), MIN : 8bit, MAX: 32bit(1 Byte * 4)
    * UTF-16(in windows, Java), MIN : 16bit, MAX: 32bit(2 Byte * 2)
    * UTF-32(in unix), MIN : 32bit, MAX: 32bit(4 Byte * 1)
  * 파이썬 인코딩
    * 2.x 버전 - ASCII => #-*- coding: utf-8 -\*-
    * 3.x 버전 - 유니코드 UTF-8 => 생략 가능
    * **다른 인코딩 방식으로 처리 시 첫 줄에 원하는 인코딩 방식을 지정해주면 됨

### 2. 문자열의 분류

* 문자열(String)

  * Fixed length
  * Variable length
    * Length controlled : Java 언어에서의 문자열
    * Delimited : C 언어에서의 문자열

* C언어에서 문자열 처리

  * 문자들의 배열 형태로 구현된 응용 자료형

  * 문자배열에 문자열을 저장할 때 항상 마지막 끝을 표시하는 널 문자('\\0')를 넣어줘야함

    ```c
    char ary[] = {'a', 'b', 'c', '\0\'}; //또는
    char ary[] = 'abc';
    ```

  * 문자열 처리에 필요한 연산을 함수 형태로 제공

    ```c
    strlen(), strcpy(), strcmp(), ...
    ```

* Java에서의 문자열 처리

  * 문자열 데이터를 저장, 처리해주는 클래스 제공

  * String 클래스를 사용

    ```java
    String str = "abc"; //또는
    String str = new String("abc");
    ```

  * 문자열 처리에 필요한 연산을 연산자, 메서드 형태로 제공
    * +, length(), replace(), split(), substring() 등
    * 풍부한 연산을 제공

* 파이썬에서의 문자열 처리

  * char 타입 없음
  * 텍스트 데이터 취급방법이 통일되어 있음
  * 문자열 기호
    * '(홑따옴표), ''(쌍따옴표), '''(홑따옴표 3개), """(쌍따옴표 3개) => 로우표현법 사용가능하여 전제척인 사용방법은 8가지 존재함
    * \+ 연결(Concatenation) => 문자열 + 문자열 : 이어 붙여주는 역할
    * \* 반복 => 문자열 * 수 : 수만큼 문자열이 반복
  * 문자열은 시퀀스 자료형으로 분류, 시퀀스 자료형에서 사용할 수 있는 인덱싱, 슬라이싱 연산들을 사용 가능
    * 문자열 클래스에서 제공되는 메서드 : replace(), split(), isalpha(), find()
  * 문자열은 튜플과 같이 요소값을 변경할 수 없음(immutable)

* C와 Java의 String 처리의 기본적 차이점

  * C : 아스키 코드로 저장

    ```c
    char * name = "홍길동"
    int count = strlen(name);
    printf("%d", count);
    ```

  * Java : 유니코드(UTF16, 2byte)로 저장

    ```java
    String name = "홍길동";
    System.out.println(name.length());
    ```

  * 파이썬 : 유니코드(UTF8)로 저장

    ```python
    name = "홍길동"
    print(len(name))
    ```

### 3. 문자열 복사

* 문자열을 복사하는 알고리즘

  1. 소스로부터 한 글자씩 읽어서 타깃에 한 글자씩 복사
  2. 문자열의 끝까지 반복 후 타깃에 문자열 끝('\\0')을 표시함

  ```c
  void user_strcpy(char *des, char *src)
  {
      while(*src!='\0'){
          *des = *src;
          src++;
          des++;
      }
      *des='\0';
  }
  ```

### 4. 문자열 뒤집기

* 문자열을 역순으로 바꾸는 뒤집기의 경우
  1. 자기 문자열에서 뒤집는 방법
     * swap을 위한 임시변수 필요
     * 반복 수행을 문자열 길이의 반만 수행해야 함
  2.  새로운 빈 문자열을 만들어 소스의 뒤에서부터 읽어서 타깃에 쓰는 방법

### 5. 문자열 비교

* 문자열의 비교

  1. c `strcmp()` 함수를 제공

     ```c
     int my_Strcmp(const char *str1, const char *str2)
     {
         int i=0,j=0;
         while(str1[i] != '\0')
         {
             if(str1[i++] != str2[j++])
                 break;
         }
         return (str1[i] - str2[j]);
     }
     ```

  2. Java `equals()`메서드를 제공

     * 문자열 비교에서 `==` 연산은 메모리 참조가 같은지 확인

  3. 파이썬 `==`연산자와 `is`연산자를 제공

     * `==`연산자는 내부적으로 특수메서드 => `__eq__()`를 호출

### 6. 문자열 숫자를 점수로 변환하기

* 문자열로 된 숫자를 정수로 변환하는 방법

  * 문자열로 이루어진 숫자를 그대로 사용하면 예상과 다른 결과값을 출력

    * 문자열을 정수로 변환하는 기능이 필요

    * c언어에서 `atoi()`함수 제공 / 역 함수로 `itoa()`있음

      ```c
      // c로 구현한 atoi() 함수
      
      int atoi(const char *string)
      {
          int value = 0, digit, c;
          while ((c = *string++) != '\0'){
              if (c >= '0' && c <= '9')
                  digit = c - '0';
              else
                  break;
              
              value = (value * 10) + digit;
          }
          return value;
      }
      ```

      * Java에서 숫자 클래스의 parse 메서드를 제공
        * ex) Integer.parseInt(String)
        * 역함수로는 toString() 메서드 제공
      * 파이썬에서 숫자와 문자변환 함수를 제공
        * ex) int("123"), float("3.14"), str(123), repr(123)



## 패턴 매칭

### 1. 문자열 교체하기

* 문자열 내에서 '1, 2'라는 문자열을 'one, two'라는 문자열로 변경하는 경우

### 2. 패턴 매칭 알고리즘

* 패턴매칭: 본문에서 특정한 문자열 찾는것

### 3. 고지식한 알고리즘(Brute Force)

* 본문 문자열을 처음부터 끝까지 차례대로 순회하면서 패턴 내의 문자들을 일일이 비교하는 방식으로 동작

* 고지식한 패턴 검색 알고리즘

  ```python
  p = "is" # 찾을 패턴
  t = "This is a book~!" # 전체 텍스트
  M = len(p) # 찾을 패턴의 길이
  N = len(t) # 전체 텍스트의 길이
  ```

  ```python
  def BruteForce(p, t):
      i = 0 # t의 인덱스
      j = 0 # p의 인덱스
      while j < M and i < N : 
          if t[i] != p[j]:
              i = i - j
              j = -1
              i = i + 1
              j = j + 1
          if j == M :
              return i - M # 검색 성공
          else:
              return -1 # 검색 실패
  ```

* 고지식한 패턴 검색 알고리즘의 시간 복잡도

  * 최악의 경우 시간 복잡도는 텍스트의 모든 위치에서 패턴을 비교해야 하므로 O(MN)이 됨
  * 길이가 10000인 String에서 길이 80의 패턴을 찾는다고 할 때, 최악의 경우 약 10,000 * 80 = 800,000 번의 비교가 일어남
  * 비교 횟수를 줄일 수 있는 방법

### 4. KMP 알고리즘

* 불일치가 발생한 텍스트 문자열의 앞 부분에 어떤 문자가 있는지 미리 알고 있으므로, 불일치가 발생한 앞 부분에 대하여 다시 비교하지 않고 매칭을 수행
* 패턴을 전처리하여 배열 `next[M]`을 구해서 잘못된 시작을 최소화함
  * `next[M]` : 불일치가 발생했을 경우 이동할 다음 위치
* 시간 복잡도
  * `O(M + N)`

### 5. 보이어-무어 알고리즘

* 오른쪽에서 왼쪽으로 비교
* 대부분의 상용 소프트웨어에서 채택하고 있는 알고리즘
* 패턴에 오른쪽 끝에 있는 문자가 불일치, 이 문자가 패턴내에 존재하지 않는 경우 => 이동거리는 패턴의 길이

* 문자열 매칭 알고리즘 비교
  * 찾고자 하는 문자열 패턴의 길이 m, 총 문자열 길이 n
    * 고지식한 패턴 검색 알고리즘 : 수행시간 `O(mn)`
    * 카프-라빈 알고리즘 : 수행시간 `O(n)`
    * KMP 알고리즘 : 수행시간 `O(n)`
    * 보이어-무어 알고리즘 : 
      * 텍스트를 모두 보지 않아도 검색 가능
      * 발상의 전환 : 패턴의 오른쪽부터 비교
      * 최악의 경우 수행시간 : `O(mn)`

